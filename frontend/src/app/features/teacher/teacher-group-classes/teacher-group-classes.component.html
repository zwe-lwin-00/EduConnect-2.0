<div class="page-block">
  <header class="page-header">
    <h1>Group classes</h1>
  </header>
  <p class="hint">Edit name, Zoom link, and active status. Enroll students from Admin (One-To-One contract or Group subscription).</p>
  <dx-toast [visible]="!!error" type="error" [message]="error" [displayTime]="6000" (onHidden)="error = ''" [position]="{ at: { x: 'center', y: 'top' }, my: { x: 'center', y: 'top' } }"></dx-toast>
  <dx-load-panel [visible]="loading" [showIndicator]="true" [showPane]="true" [shading]="false" message="Loadingâ€¦"></dx-load-panel>
  <div *ngIf="!loading && !error && !list.length" class="empty-state">
    <p>No group classes assigned to you yet.</p>
  </div>
  <dx-data-grid *ngIf="!loading && !error && list.length" [dataSource]="list" [showBorders]="true" keyExpr="id">
    <dxi-column dataField="name" caption="Name"></dxi-column>
    <dxi-column dataField="zoomJoinUrl" caption="Zoom URL"></dxi-column>
    <dxi-column dataField="active" caption="Active" dataType="boolean"></dxi-column>
    <dxi-column dataField="enrollmentCount" caption="Enrollments" dataType="number"></dxi-column>
    <dxi-column dataField="scheduleStartTime" caption="Start"></dxi-column>
    <dxi-column dataField="scheduleEndTime" caption="End"></dxi-column>
    <dxi-column type="buttons" width="80">
      <dxi-button hint="Edit" (onClick)="openEdit($any($event).row.data)"></dxi-button>
    </dxi-column>
  </dx-data-grid>
</div>
<dx-popup [(visible)]="showEdit" title="Edit group class" [showCloseButton]="true" [width]="440" (onHiding)="closeEdit()">
  <div class="popup-form" *ngIf="selected">
    <div class="form-item">
      <label>Name</label>
      <dx-text-box [(value)]="editForm.name"></dx-text-box>
    </div>
    <div class="form-item">
      <label>Zoom join URL</label>
      <dx-text-box [(value)]="editForm.zoomJoinUrl" placeholder="https://..."></dx-text-box>
    </div>
    <div class="form-item">
      <dx-check-box [value]="editForm.active" (valueChange)="editForm.active = $any($event) ?? false" text="Active"></dx-check-box>
    </div>
    <div class="popup-actions">
      <dx-button text="Save" type="default" (onClick)="saveEdit()"></dx-button>
      <dx-button text="Cancel" type="normal" (onClick)="closeEdit()"></dx-button>
    </div>
  </div>
</dx-popup>
