<div class="page-block">
  <header class="page-header">
    <h1>Weekly availability</h1>
  </header>
  <p class="hint">Set your available time slots (1–7 = Mon–Sun). Save to update.</p>
  <p *ngIf="error" class="error">{{ error }}</p>
  <div *ngIf="loading" class="loading" aria-live="polite">Loading…</div>
  <div *ngIf="!loading && !error && !slots.length" class="empty-state">
    <p>No slots yet. Add a slot below and save.</p>
  </div>
  <div *ngIf="!loading && !error">
    <div class="slot-list">
      <div *ngFor="let s of slots; let i = index" class="slot-row">
        <select [(ngModel)]="s.dayOfWeek" style="width:80px">
          <option *ngFor="let d of [1,2,3,4,5,6,7]" [value]="d">{{ dayLabel(d) }}</option>
        </select>
        <input type="time" [(ngModel)]="s.startTime" />
        <span>–</span>
        <input type="time" [(ngModel)]="s.endTime" />
        <button type="button" (click)="removeSlot(i)">Remove</button>
      </div>
    </div>
    <div class="add-row">
      <select [(ngModel)]="newSlot.dayOfWeek">
        <option *ngFor="let d of [1,2,3,4,5,6,7]" [value]="d">{{ dayLabel(d) }}</option>
      </select>
      <input type="time" [(ngModel)]="newSlot.startTime" />
      <input type="time" [(ngModel)]="newSlot.endTime" />
      <button type="button" (click)="addSlot()">Add slot</button>
    </div>
    <button type="button" class="btn-primary" (click)="save()" [disabled]="saving">{{ saving ? 'Saving…' : 'Save availability' }}</button>
  </div>
</div>
