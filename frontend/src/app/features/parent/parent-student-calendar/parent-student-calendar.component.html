<div class="page-block">
  <a routerLink="/parent/student/{{ studentId }}" class="back">← {{ studentName || 'Student' }}</a>
  <p *ngIf="error" class="error">{{ error }}</p>
  <div *ngIf="loading" class="loading" aria-live="polite">Loading…</div>
  <div *ngIf="!loading && invalidStudent" class="invalid-student">
    <p>Invalid student.</p>
    <p><a routerLink="/parent">Return to My students</a>.</p>
  </div>
  <div *ngIf="!loading && !error && !invalidStudent">
    <header class="page-header">
      <h1>Calendar{{ studentName ? ': ' + studentName : '' }}</h1>
      <div class="month-nav">
        <button type="button" class="btn-secondary" (click)="prevMonth()">← Prev</button>
        <span class="month-label">{{ monthLabel() }}</span>
        <button type="button" class="btn-secondary" (click)="nextMonth()">Next →</button>
      </div>
    </header>
    <div class="calendar-wrap">
      <table class="month-grid">
        <thead>
          <tr>
            <th *ngFor="let w of weekDays" class="weekday">{{ w }}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of weeks">
            <td *ngFor="let cell of row" class="day-cell" [class.other-month]="!cell.isCurrentMonth" [class.holiday]="cell.isHoliday">
              <div class="day-num">{{ cell.dayOfMonth }}</div>
              <div *ngIf="cell.isHoliday" class="holiday-label">Holiday</div>
              <ul class="day-items">
                <li *ngFor="let it of cell.items" [class.completed]="it.completed" [class.upcoming]="!it.completed">
                  <span class="type">{{ it.type === 'ONE_TO_ONE' ? '1:1' : 'Group' }}</span>
                  <span class="label">{{ it.label }}</span>
                  <span class="status">{{ it.completed ? '✓' : '—' }}</span>
                </li>
              </ul>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
